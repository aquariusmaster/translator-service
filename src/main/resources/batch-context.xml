<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:batch="http://www.springframework.org/schema/batch" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/batch
		 http://www.springframework.org/schema/batch/spring-batch.xsd
		http://www.springframework.org/schema/beans
		http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
		">

    <job id="job" xmlns="http://www.springframework.org/schema/batch">

        <split id="split1" task-executor="taskExecutor">
            <flow>
                <step id="step1">
                    <tasklet>
                        <chunk reader="elasticsearchReader" writer="elasticsearchWriter"
                               commit-interval="1" skip-limit="9999">
                            <skippable-exception-classes>
                                <include class="org.elasticsearch.client.transport.NoNodeAvailableException"/>
                                <include class="org.elasticsearch.ElasticsearchException"/>
                            </skippable-exception-classes>

                        </chunk>
                    </tasklet>
                </step>
            </flow>
            <flow>
                <step id="step2">
                    <tasklet>
                        <chunk reader="redisReader" writer="redisWriter"
                               commit-interval="1" />
                    </tasklet>
                </step>
            </flow>
        </split>
    </job>

    <bean id="taskExecutor" class="org.springframework.core.task.SimpleAsyncTaskExecutor"></bean>
</beans>